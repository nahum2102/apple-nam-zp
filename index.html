<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PEAR STORE</title>

<style>
:root{
  --bg:#fdfdfd;
  --card:#ffffff;
  --accent:#000000;
  --accent-hover:#333333;
  --success:#34c759;
  --shadow:0 6px 20px rgba(0,0,0,0.08);
}

*{box-sizing:border-box}
body{margin:0;font-family:'Segoe UI', sans-serif;background:var(--bg);color:#111;line-height:1.5}
a{text-decoration:none}

@keyframes slideInRight {
  0%{opacity:0;transform:translateX(120%);}
  60%{opacity:1;transform:translateX(-10%);}
  100%{opacity:1;transform:translateX(0);}
}
.slide-in {animation: slideInRight 2s ease-out forwards;}

header{
  background:#000;color:#fff;padding:20px 0;text-align:center;font-weight:700;
  font-size:28px;letter-spacing:1px;text-transform:uppercase;
  box-shadow:0 4px 12px rgba(0,0,0,0.2);
}

.wrap{
  width:95%; max-width:1200px;margin:32px auto;
  display:grid; grid-template-columns:1fr 360px; gap:28px;
}

.catalogo{
  display:grid; grid-template-columns:repeat(auto-fill,minmax(250px,1fr)); gap:20px;
}

.producto{
  background:var(--card); border-radius:14px; padding:18px;
  box-shadow:var(--shadow); text-align:center;
  transition:transform 0.3s, box-shadow 0.3s;
}
.producto:hover{
  transform:translateY(-4px);
  box-shadow:0 10px 25px rgba(0,0,0,0.12);
}

.carousel{
  width:100%; height:180px; position:relative; overflow:hidden;
  border-radius:12px; margin-bottom:12px;
}
.carousel img{
  width:100%; height:100%; object-fit:cover;
}

.btn-slide{
  position:absolute; top:50%; transform:translateY(-50%);
  background:rgba(0,0,0,0.5); color:white; border:none;
  border-radius:50%; width:28px; height:28px;
  cursor:pointer; font-size:18px; line-height:1;
  display:flex; align-items:center; justify-content:center;
}
.prev{left:8px} .next{right:8px}

.producto h4{margin:10px 0;font-size:17px;font-weight:600;color:#222}
.producto .precio{font-weight:bold; margin:8px 0; font-size:16px;color:#000}

.btn{
  padding:10px 16px; border-radius:8px; border:0; cursor:pointer;
  font-weight:600; transition:0.3s;
}
.btn-comprar{background:var(--accent); color:#fff}
.btn-comprar:hover{background:var(--accent-hover)}

aside{
  background:#fff; padding:20px; border-radius:14px; box-shadow:var(--shadow);
  position:sticky; top:20px;
}

.linea-item{
  display:flex; justify-content:space-between; padding:8px 0;
  border-bottom:1px solid #eee; font-size:14px;
}

.btn-eliminar{
  background:#ff3b30; color:#fff; border:0; border-radius:6px;
  padding:6px 10px; cursor:pointer;
}
.btn-eliminar:hover{background:#e02a20;}

.btn-finalizar{
  background:var(--success); color:#fff; width:100%;
  border:0; border-radius:10px; padding:12px;
  margin-top:16px; cursor:pointer; font-weight:bold; font-size:16px;
}
.btn-finalizar:hover{background:#28a745}

input{
  width:100%; padding:8px; margin:6px 0;
  border-radius:8px; border:1px solid #ccc; font-size:14px;
}

.metodoPago{
  border:1px solid #ccc; border-radius:10px; padding:14px;
  margin-bottom:12px; cursor:pointer; transition:0.3s;
  background:#f9f9f9; font-size:15px;
}
.metodoPago.selected{
  border-color:var(--accent); background:#eaeaea;
}

#transferenciaInfo{
  background:#f1f1f1; padding:12px; border-radius:8px;
  margin-top:8px; font-size:14px;
}

/* ----------------------- */
/* BOT√ìN INSTAGRAM MODERNO */
/* ----------------------- */
.btn-instagram{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:12px 20px;
  border-radius:12px;
  font-weight:bold;
  font-size:15px;
  color:white;
  background:linear-gradient(45deg, #000, #444);
  transition:0.3s;
  margin-top:18px;
}
.btn-instagram:hover{
  transform:scale(1.05);
  background:linear-gradient(45deg, #111, #222);
}

.btn-instagram img{
  width:20px;
  height:20px;
}

@media(max-width:900px){ .wrap{grid-template-columns:1fr} }
</style>
</head>
<body>

<header class="slide-in">PEAR STORE</header>

<div class="wrap">
  <section id="catalogo" class="catalogo"></section>

  <aside>
    <h3>Carrito</h3>
    <div id="carritoItems"><p>El carrito est√° vac√≠o.</p></div>
    <div id="total" style="font-weight:bold;margin-top:12px">Total: $0</div>

    <!-- M√âTODO DE ENTREGA -->
    <h4>M√©todo de entrega</h4>

    <div id="domicilioCaja" class="metodoPago selected" onclick="seleccionarEntrega('domicilio')">
      <b>Entrega a domicilio</b>
    </div>

    <div id="personalCaja" class="metodoPago" onclick="seleccionarEntrega('personal')">
      <b>Entrega personal</b>
    </div>

    <div id="direccionCampos">
      <h4>Datos del domicilio</h4>
      <input type="text" id="nombre" placeholder="Nombre completo">
      <input type="text" id="calle" placeholder="Calle y n√∫mero">
      <input type="text" id="colonia" placeholder="Colonia">
      <input type="text" id="ciudad" placeholder="Ciudad">
    </div>

    <h4>M√©todo de pago</h4>

    <div id="transferenciaCaja" class="metodoPago" onclick="seleccionarPago('transferencia')">
      <b>Transferencia Bancaria</b>
      <div id="transferenciaInfo" style="display:none;">
        <p>Banco: <b>Spin by OXXO</b></p>
        <p>Cuenta/CLABE: <b>728969000160872559</b></p>
        <p>Titular: <b>Nahum Aquino</b></p>
        <p>Enviar comprobante: <b>8145344751</b></p>
      </div>
    </div>

    <div id="efectivoCaja" class="metodoPago selected" onclick="seleccionarPago('efectivo')">
      <b>Efectivo</b>
    </div>

    <button class="btn-finalizar" onclick="enviarPedido()">Enviar Pedido</button>

    <!-- NUEVO: BOT√ìN INSTAGRAM ABAJO -->
    <div style="text-align:center;">
      <a href="https://www.instagram.com/pear_storre" target="_blank" class="btn-instagram">
        <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png">
        S√≠guenos en Instagram
      </a>
    </div>

  </aside>
</div>

<script>
const productos = [
  {id:1,nombre:"AirPods 2 Pro",precio:450,imagenes:["IMG-1235.webp","IMG-1232.webp","IMG-1235.webp"]},
  {id:2,nombre:"AirPods 3ra Generaci√≥n",precio:450,imagenes:["E14433AB-04B2-4D85-8821-764E59DE4FE6.webp","DF7EDE8C-9CE1-4436-B993-4094D12430DF.webp","D3617BDC-8397-48C0-B488-CAAC985058B9.webp","B82AA671-AEA6-4E14-B9E5-D243345B3999.webp"]},
  {id:3,nombre:"Cargador USB-C 35W",precio:250,imagenes:["82B70C5A-37C7-4337-8C92-CD52E626A8C1.webp","926667B9-EC57-43F3-A745-544619645143.webp"]},
  {id:4,nombre:"Cable Lightning Original",precio:250,imagenes:["4FF89AC7-8830-4A38-B846-F11A91BE8560.webp","5C736A05-5843-4569-A60B-35ADC7E40789.webp"]},
  {id:5,nombre:"Bater√≠a MagSafe",precio:300,imagenes:["3E6EF8DC-C60E-4895-8492-9791AB026C79.webp","A4D0C978-7C77-4380-A5DF-8EB5E4B08675.webp","DE9498AD-7C7C-4BD9-BAAE-C4F040713397.webp"]}
];
let carrito = [];
let metodoPagoSeleccionado = "efectivo";
let metodoEntrega = "domicilio";

function seleccionarEntrega(tipo){
    metodoEntrega = tipo;

    document.getElementById("domicilioCaja").classList.remove("selected");
    document.getElementById("personalCaja").classList.remove("selected");

    if(tipo === "domicilio"){
        document.getElementById("domicilioCaja").classList.add("selected");
        document.getElementById("direccionCampos").style.display = "block";
    } else {
        document.getElementById("personalCaja").classList.add("selected");
        document.getElementById("direccionCampos").style.display = "none";
    }
}

function renderizarCatalogo(){
  const cont=document.getElementById("catalogo"); cont.innerHTML="";
  productos.forEach(p=>{
    const div=document.createElement("div"); div.className="producto";
    div.innerHTML=`
      <div class="carousel" data-id="${p.id}">
        <img src="${p.imagenes[0]}" data-index="0" alt="${p.nombre}">
        <button class="btn-slide prev">‚Äπ</button>
        <button class="btn-slide next">‚Ä∫</button>
      </div>
      <h4>${p.nombre}</h4>
      <div class="precio">$${p.precio}</div>
      <button class="btn btn-comprar" onclick="agregarCarrito(${p.id})">Comprar</button>
    `;
    cont.appendChild(div);
  });
  activarCarruseles();
}

function activarCarruseles(){
  document.querySelectorAll(".carousel").forEach(c=>{
    const id=c.dataset.id;
    const p=productos.find(x=>x.id==id);
    const img=c.querySelector("img");
    let index=0;

    c.querySelector(".next").onclick=()=>{
      index=(index+1)%p.imagenes.length;
      img.src=p.imagenes[index];
    };
    c.querySelector(".prev").onclick=()=>{
      index=(index-1+p.imagenes.length)%p.imagenes.length;
      img.src=p.imagenes[index];
    };
  });
}

function agregarCarrito(id){
  const p=productos.find(x=>x.id===id);
  let item=carrito.find(x=>x.id===id);
  if(item) item.cantidad++;
  else carrito.push({id:p.id,nombre:p.nombre,precio:p.precio,cantidad:1});
  actualizarCarrito();
}

function actualizarCarrito(){
  const cont=document.getElementById("carritoItems"); cont.innerHTML="";
  if(carrito.length===0){
    cont.innerHTML="<p>El carrito est√° vac√≠o.</p>";
    document.getElementById("total").innerText="Total: $0";
    return;
  }
  let total=0;
  carrito.forEach(i=>{
    const sub=i.precio*i.cantidad;
    total+=sub;
    cont.innerHTML+=`
      <div class="linea-item">
        <div><b>${i.nombre}</b><br>$${i.precio} x ${i.cantidad} = $${sub}</div>
        <button class="btn-eliminar" onclick="eliminar(${i.id})">X</button>
      </div>
    `;
  });
  document.getElementById("total").innerText="Total: $"+total;
}

function eliminar(id){
  carrito=carrito.filter(i=>i.id!==id);
  actualizarCarrito();
}

function seleccionarPago(metodo){
  metodoPagoSeleccionado = metodo;

  document.getElementById("transferenciaCaja").classList.remove("selected");
  document.getElementById("efectivoCaja").classList.remove("selected");

  if(metodo === "transferencia"){
    document.getElementById("transferenciaCaja").classList.add("selected");
    document.getElementById("transferenciaInfo").style.display = "block";
  } else {
    document.getElementById("efectivoCaja").classList.add("selected");
    document.getElementById("transferenciaInfo").style.display = "none";
  }
}

function enviarPedido(){
  if(carrito.length===0){ alert("El carrito est√° vac√≠o"); return; }

  let mensaje = "üì¶ *NUEVO PEDIDO*%0A%0A";

  carrito.forEach(i=>{
    mensaje += `‚Ä¢ ${i.nombre} x${i.cantidad} = $${i.precio * i.cantidad}%0A`;
  });

  let total = carrito.reduce((s,i)=>s+i.precio*i.cantidad,0);
  mensaje += `%0Aüí∞ *TOTAL:* $${total}%0A%0A`;

  mensaje += `üìç *M√©todo de entrega:* ${metodoEntrega}%0A%0A`;

  if(metodoEntrega==="domicilio"){
    const nombre=document.getElementById("nombre").value.trim();
    const calle=document.getElementById("calle").value.trim();
    const colonia=document.getElementById("colonia").value.trim();
    const ciudad=document.getElementById("ciudad").value.trim();

    if(!nombre||!calle||!colonia||!ciudad){
      alert("Por favor completa todos los campos de domicilio.");
      return;
    }

    mensaje+=`üè† *DIRECCI√ìN*%0A`;
    mensaje+=`Nombre: ${nombre}%0A`;
    mensaje+=`Calle: ${calle}%0A`;
    mensaje+=`Colonia: ${colonia}%0A`;
    mensaje+=`Ciudad: ${ciudad}%0A%0A`;
  }

  mensaje+=`üí≥ *M√©todo de pago:* ${metodoPagoSeleccionado}%0A`;

  const numero="8145344751";
  const url="https://wa.me/52"+numero+"?text="+mensaje;
  window.open(url, "_blank");
}

document.addEventListener("DOMContentLoaded",()=>{
  renderizarCatalogo();
  actualizarCarrito();
});
</script>

</body>
</html>
